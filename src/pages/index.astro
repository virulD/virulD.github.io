---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';
import ProjectCard from '../components/ProjectCard.astro';
import SkillTag from '../components/SkillTag.astro';
import Experience from '../components/Experience.astro';
import { Image } from 'astro:assets';
import profileImage from '../assets/profile.jpg';

const skills = [
  "JavaScript (ES6+)", "TypeScript", "React", "Node.js", "Python", "Java", "SQL", "Git", "Astro", "Docker"
];

const projects = [
  {
    title: "My Clinic",
    description: "A mobile application to book doctor appointments. Built with React Native and Node.js.",
    tags: ["React Native", "Node.js", "MongoDB"],
    link: "#"
  },
  {
    title: "Event Planners LK",
    description: "A web application to book events & organize events in Sri Lanka. Built with Next.js and Nest.js.",
    tags: ["Next.js", "Nest.js", "MongoDB"],
    link: "#"
  },
  {
    title: "Boarding Register",
    description: "A Mobile application to register boardings insri lanka & Maintain boarding members details. Built with React Native and Node.js.",
    tags: ["React Native", "Node.js", "MongoDB"],
    link: "#"
  }
];

const techStack = [
  { name: "React", icon: "react" },
  { name: "React Native", icon: "reactnative" },  { name: "Next.js", icon: "next" },
  { name: "Node.js", icon: "node" },
  { name: "MongoDB", icon: "mongo" },
  { name: "Express", icon: "express" },
  { name: "Firebase", icon: "firebase" },
  { name: "Git", icon: "git" },
];
---

<Layout title="Virul De Silva - Portfolio">
  <Navbar />
  
  <main>
    <!-- Hero -->
    <section id="home" class="hero-wrapper">
      <div class="container hero-container">
        
        <!-- Left Content -->
        <div class="hero-content">
          <div class="badge-wrapper">
            <span class="badge">
              <span class="star">★</span> Available for work
            </span>
          </div>

          <h1 class="hero-title">
            Hello, I'm <br />
            <span class="text-gradient">Virul De Silva</span>
          </h1>

          <p class="hero-description">
            I'm a Full-Stack Developer from Sri Lanka with years of experience in building scalable web/mobile applications. I turn complex problems into beautiful, functional interfaces.
          </p>

          <div class="hero-actions">
            <a href="#contact" class="btn btn-primary">
              Contact Me 
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
            </a>
            
            <div class="social-links">
               <a href="https://www.linkedin.com/in/virul-akbo-de-silva-64a693255" aria-label="LinkedIn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>
               </a>
               <a href="https://github.com/virulD" aria-label="GitHub">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
               </a>
            </div>
          </div>

          <div class="tech-stack-section">
            <span class="tech-label">TECH STACK</span>
            <div class="tech-grid">
              {techStack.map(tech => (
                <div class="tech-pill">
                  <span class="tech-icon">⚡</span> <!-- Placeholder icon -->
                  {tech.name}
                </div>
              ))}
            </div>
          </div>
        </div>

        <!-- Right Content (Image) -->
        <div class="hero-image-wrapper">
          <div class="image-container">
            <Image src={profileImage} alt="Virul De Silva" class="profile-img" />
            
            <!-- Floating Card -->
            <div class="floating-card">
              <div class="code-icon-circle">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>
              </div>
              <div>
                <span class="expert-label">Expertise</span>
                <span class="expert-title">React Developer</span>
              </div>
            </div>
          </div>
        </div>

      </div>
    </section>

    <!-- Experience Section -->
    <section id="experience" class="section">
      <div class="container">
        <h2 class="section-title">02. Work Experience</h2>
        <Experience />
      </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="section">
      <div class="container">
        <h2 class="section-title">03. Featured Projects</h2>
        <div class="projects-grid">
          {projects.map(project => (
            <ProjectCard 
              title={project.title} 
              description={project.description} 
              tags={project.tags} 
              link={project.link}
            />
          ))}
        </div>
      </div>
    </section>

    <!-- Skills Section (Visual) -->
    <section id="skills" class="section">
      <div class="container">
        <h2 class="section-title">04. Technical Expertise</h2>
        <div class="skills-wrapper">
          {skills.map(skill => <SkillTag name={skill} />)}
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="section text-center">
      <div class="container contact-container">
        <h2 class="contact-title">Get In Touch</h2>
        <p class="contact-desc">
          Although I'm not currently looking for any new opportunities, my inbox is always open. Whether you have a question or just want to say hi, I'll try my best to get back to you!
        </p>
        <a href="mailto:waviruldesilva@gmail.com" class="btn btn-primary big-btn">Say Hello</a>
      </div>
    </section>

    <footer class="text-center footer">
      <div class="container">
        <p>© {new Date().getFullYear()} Virul De Silva. All rights reserved.</p>
      </div>
    </footer>
  </main>
</Layout>

<style>
  main {
    /* No top padding needed if hero handles full height/centering properly, but keeping consistent */
    overflow: hidden;
  }

  /* Hero Layout */
  .hero-wrapper {
    min-height: 100vh;
    display: flex;
    align-items: center;
    position: relative;
    padding-top: 80px; /* Navbar height offset */
    background: radial-gradient(circle at 80% 20%, rgba(29, 78, 216, 0.15), transparent 40%);
  }

  .hero-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 4rem;
    align-items: center;
  }

  /* Left Column */
  .hero-title {
    font-size: clamp(3rem, 5vw, 4.5rem);
    line-height: 1.1;
    margin-bottom: 1.5rem;
  }

  .badge-wrapper {
    margin-bottom: 1.5rem;
  }

  .badge {
    background: rgba(30, 41, 59, 0.8);
    border: 1px solid rgba(56, 189, 248, 0.3);
    color: var(--accent-color);
    padding: 0.5rem 1rem;
    border-radius: 9999px;
    font-size: 0.875rem;
    font-weight: 500;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
  }

  .star { color: #facc15; }

  .hero-description {
    font-size: 1.125rem;
    max-width: 500px;
    line-height: 1.7;
    margin-bottom: 2.5rem;
  }

  .hero-actions {
    display: flex;
    align-items: center;
    gap: 2rem;
    margin-bottom: 4rem;
  }

  .social-links {
    display: flex;
    gap: 1.5rem;
  }

  .social-links a {
    color: var(--text-muted);
    transition: color 0.2s;
  }

  .social-links a:hover {
    color: white;
  }

  /* Tech Stack */
  .tech-stack-section {
    border-top: 1px solid rgba(148, 163, 184, 0.1);
    padding-top: 2rem;
  }

  .tech-label {
    display: block;
    font-size: 0.75rem;
    font-weight: 700;
    letter-spacing: 0.05em;
    color: var(--text-muted);
    margin-bottom: 1rem;
    text-transform: uppercase;
  }

  .tech-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
  }

  .tech-pill {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: rgba(30, 41, 59, 0.5);
    border: 1px solid rgba(148, 163, 184, 0.1);
    border-radius: 8px;
    font-size: 0.9rem;
    color: var(--text-muted);
    transition: all 0.2s;
  }

  .tech-pill:hover {
    background: rgba(56, 189, 248, 0.1);
    border-color: rgba(56, 189, 248, 0.3);
    color: var(--accent-color);
  }

  /* Right Column (Image) */
  .hero-image-wrapper {
    position: relative;
    display: flex;
    justify-content: center;
    perspective: 1000px;
  }

  /* The outer container for positioning and the decorative frame */
  .image-container {
    position: relative;
    width: 100%;
    max-width: 480px;
    z-index: 1;
  }

  /* The decorative lines/frame behind the image */
  .image-container::before {
    content: "";
    position: absolute;
    top: -15px;
    right: -15px;
    bottom: 15px;
    left: 15px;
    border: 1px solid rgba(56, 189, 248, 0.3); /* Cyan/Blue tint */
    border-radius: 24px;
    z-index: -1;
    transition: transform 0.3s ease;
  }
  
  /* Hover effect for the decoration */
  .image-container:hover::before {
    transform: translate(5px, -5px);
  }

  /* The actual image clipper */
  .profile-img {
    width: 100%;
    height: auto;
    aspect-ratio: 1 / 1.1;
    object-fit: cover;
    border-radius: 24px;
    /* Main Card Shadow/Glow */
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.1), 
                0 20px 50px -10px rgba(0, 0, 0, 0.5);
    display: block;
    position: relative;
    z-index: 2;
  }

  /* Floating Card */
  .floating-card {
    position: absolute;
    top: 40px;
    right: -30px;
    background: rgba(15, 23, 42, 0.9);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(56, 189, 248, 0.2);
    padding: 0.75rem 1.25rem;
    border-radius: 16px;
    display: flex;
    align-items: center;
    gap: 1rem;
    box-shadow: 0 15px 35px -5px rgba(0, 0, 0, 0.4);
    z-index: 3;
    animation: float 6s ease-in-out infinite;
  }

  .code-icon-circle {
    width: 40px;
    height: 40px;
    background: rgba(34, 197, 94, 0.2); /* Green tint */
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #4ade80;
  }

  .expert-label {
    display: block;
    font-size: 0.7rem;
    color: var(--text-muted);
  }

  .expert-title {
    display: block;
    font-size: 0.9rem;
    font-weight: 600;
    color: white;
  }

  @keyframes float {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0px); }
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .hero-container {
      grid-template-columns: 1fr;
      text-align: center;
      gap: 3rem;
    }

    .hero-content {
      order: 1;
    }

    .hero-image-wrapper {
      order: 2;
    }
    
    .hero-actions {
      justify-content: center;
    }
    
    .tech-grid {
      justify-content: center;
    }

    .floating-card {
      right: 0;
    }
  }

  /* Projects Section etc. */
  .projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
  }

  .section-title {
    font-size: 2rem;
    margin-bottom: 2rem;
    color: white;
  }
</style>
